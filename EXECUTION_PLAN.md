# 🎯 7-9 天完整执行计划

## 📌 项目概述

**目标**：在 7-9 天内完成一个可用的菜品生成与查询系统（MVP）

**技术栈**：
- 后端：Python FastAPI + SQLite
- 前端：Vanilla JS + HTML5 + Tailwind CSS
- 开发周期：7-9 天（每天 4-8 小时）

**核心功能**：
1. 随机推荐菜品
2. 基于食材推荐菜品
3. 搜索菜品
4. 查看菜品详情

---

## 🗓️ 日程分解

### 📅 第 1 天：环境配置 + 数据库（最重要！）

**时间配额**：4-8 小时  
**优先级**：🔴 必须完成

**上午（2-3 小时）**：环境准备
- [ ] 创建项目文件夹：`mkdir SearchMenu && cd SearchMenu && git init`
- [ ] 创建文件夹结构：`mkdir backend frontend`
- [ ] 创建后端虚拟环境：`python -m venv backend/venv`
- [ ] 激活虚拟环境：`source backend/venv/bin/activate`
- [ ] 安装依赖：`pip install fastapi uvicorn sqlalchemy pydantic jieba`

**下午（2-3 小时）**：数据库设计与初始化
- [ ] 创建 `app/models.py` - 定义 Dish、Ingredient、CookingStep 表
- [ ] 创建 `app/database.py` - 数据库连接配置
- [ ] 创建 `scripts/init_db.py` - 初始化脚本
- [ ] 运行初始化脚本，导入至少 5 个示例菜品
- [ ] 验证数据库：`sqlite3 backend/search_menu.db "SELECT COUNT(*) FROM dishes;"`

**晚上（如有时间）**：准备更多数据
- [ ] 准备 10+ 个菜品数据（可从 HowToCook 示例中复制）
- [ ] 多种类别：素菜、荤菜、汤等

**成功标志**：✅
```
✓ search_menu.db 文件存在
✓ 执行 SELECT COUNT(*) FROM dishes; 返回 5+ 的数据
✓ 每个菜品都有食材列表
```

---

### 📅 第 2 天：后端核心 API（随机 + 推荐）

**时间配额**：4-8 小时  
**优先级**：🔴 必须完成

**上午（2-3 小时）**：FastAPI 基础
- [ ] 创建 `app/main.py` - 主应用文件
- [ ] 实现启动代码和 CORS 配置
- [ ] 定义 Pydantic 数据模型（请求/响应格式）
- [ ] 实现 `/health` 端点测试服务器

**下午（2-3 小时）**：核心 API 实现
- [ ] 实现 `GET /api/v1/dishes/random` 端点
  - 支持 `category` 和 `difficulty` 参数
  - 随机返回一个菜品
  
- [ ] 实现 `POST /api/v1/dishes/recommend` 端点
  - 接收食材列表
  - 实现食材匹配算法（简单版：子字符串匹配）
  - 返回排序后的菜品列表

**晚上（如有时间）**：测试
- [ ] 启动服务器：`uvicorn app.main:app --reload`
- [ ] 测试 API：
  ```bash
  curl http://localhost:8000/api/v1/health
  curl http://localhost:8000/api/v1/dishes/random
  curl -X POST http://localhost:8000/api/v1/dishes/recommend \
    -H "Content-Type: application/json" \
    -d '{"ingredients": ["番茄"]}'
  ```

**成功标志**：✅
```
✓ 服务器启动无错误
✓ /health 返回 {"status": "ok"}
✓ /random 返回完整菜品信息
✓ /recommend 返回匹配的菜品列表
✓ http://localhost:8000/docs 可以查看 API 文档
```

---

### 📅 第 3 天：完善后端 API

**时间配额**：4-8 小时  
**优先级**：🔴 必须完成

**上午（2-3 小时）**：搜索和详情 API
- [ ] 实现 `GET /api/v1/dishes/search` 端点
  - 支持关键词搜索（菜品名称、描述）
  - 支持分页
  
- [ ] 实现 `GET /api/v1/dishes/{dish_id}` 端点
  - 返回完整的菜品信息（含步骤）

**下午（2-3 小时）**：辅助 API + 测试
- [ ] 实现 `GET /api/v1/ingredients` 端点 - 用于自动完成
- [ ] 实现 `GET /api/v1/metadata` 端点 - 返回类别、难度等
- [ ] 添加错误处理和验证
- [ ] 全面测试所有 API 端点

**晚上（如有时间）**：优化
- [ ] 改进匹配算法（可选）
- [ ] 添加日志输出
- [ ] 性能测试

**成功标志**：✅
```
✓ 5 个核心 API 都能返回正确数据
✓ Swagger 文档显示所有端点
✓ 错误情况下有友好的错误信息
✓ 后端可以持续运行而不崩溃
```

---

### 📅 第 4 天：前端基础 + 连接 API

**时间配额**：4-8 小时  
**优先级**：🔴 必须完成

**上午（2-3 小时）**：前端项目初始化
- [ ] 进入 `frontend` 目录
- [ ] 初始化 Node 项目：`npm init -y`
- [ ] 安装依赖：`npm install -D vite axios`
- [ ] 安装 Tailwind：`npm install tailwindcss`
- [ ] 创建 `index.html` - 基础 HTML 页面

**下午（2-3 小时）**：前端逻辑与集成
- [ ] 创建 `src/api.js` - API 客户端封装
- [ ] 创建 `src/main.js` - 主应用逻辑
  - 随机推荐功能
  - 食材推荐功能
  - 事件监听和数据绑定
  
- [ ] 创建 `src/styles.css` - Tailwind 样式
- [ ] 启动前端：`npm run dev`
- [ ] 测试基本功能

**晚上（如有时间）**：调试
- [ ] 检查前后端通信
- [ ] 解决 CORS 问题（如有）
- [ ] 验证数据显示正确

**成功标志**：✅
```
✓ 前端可以访问 http://localhost:5173
✓ 点击"推荐菜品"可以显示一道菜
✓ 输入食材可以推荐相关菜品
✓ 浏览器控制台没有 CORS 错误
✓ API 返回的数据能正确显示
```

---

### 📅 第 5 天：搜索 + 菜品详情页面

**时间配额**：4-8 小时  
**优先级**：🟡 重要

**上午（2-3 小时）**：菜品详情实现
- [ ] 添加"查看详情"按钮到菜品卡片
- [ ] 创建模态框（Modal）组件
- [ ] 实现菜品详情显示
  - 菜品信息
  - 所需食材列表
  - 烹饪步骤
  - 原菜谱链接

**下午（2-3 小时）**：搜索功能
- [ ] 在导航栏添加搜索框
- [ ] 实现搜索功能
- [ ] 显示搜索结果列表
- [ ] 支持从结果点击查看详情

**晚上（如有时间）**：UI 美化
- [ ] 优化样式，使用 Tailwind 类
- [ ] 改进响应式设计
- [ ] 添加悬停效果和过渡动画

**成功标志**：✅
```
✓ 可以搜索菜品
✓ 可以查看菜品详情
✓ 详情页面显示完整信息
✓ 页面在手机上也能看
✓ 没有明显的样式问题
```

---

### 📅 第 6 天：调试 + 优化 + 准备部署

**时间配额**：4-8 小时  
**优先级**：🟡 重要

**上午（2-3 小时）**：完整功能测试
- [ ] 完整的用户旅程测试
  - 随机推荐 → 查看详情
  - 输入食材 → 查看推荐 → 查看详情
  - 搜索菜品 → 查看详情
  
- [ ] 测试各种边界情况
  - 空搜索结果
  - 无效食材输入
  - 网络延迟情况

**下午（2-3 小时）**：Bug 修复 + 优化
- [ ] 修复所有找到的 bug
- [ ] 改进加载状态（显示 Loading）
- [ ] 改进错误提示信息
- [ ] 性能优化：
  - 避免重复 API 调用
  - 添加简单的缓存（如使用 localStorage）

**晚上（如有时间）**：文档和演示准备
- [ ] 编写 README.md（安装、运行、使用说明）
- [ ] 准备一份简单的使用演示文本
- [ ] 记录已知的 bug 或限制（如有）

**成功标志**：✅
```
✓ 应用可以稳定运行 30 分钟无崩溃
✓ 所有主要功能正常工作
✓ 没有明显的 bug
✓ 性能可接受（API 响应 < 500ms）
✓ README.md 已完成
✓ 应用可以演示
```

---

### 📅 第 7-9 天（可选）：部署 + 扩展

**第 7 天：部署后端**
- [ ] 创建 Docker 镜像（可选）
- [ ] 部署到 Railway 或 Render
- [ ] 配置生产环境 URL
- [ ] 验证部署成功

**第 8 天：部署前端**
- [ ] 构建前端：`npm run build`
- [ ] 部署到 Vercel 或 GitHub Pages
- [ ] 配置生产环境 API URL
- [ ] 测试部署后的应用

**第 9 天：扩展功能（如时间允许）**
- [ ] 添加收藏夹功能（本地存储）
- [ ] 添加深色模式
- [ ] 优化搜索建议
- [ ] 制作项目演示视频

---

## 🎯 每天的关键检查点

| 天数 | 关键问题 | 应答 |
|------|--------|------|
| **第1天** | 数据库能否查询到菜品？ | ✓ 能 |
| **第2天** | API 能否随机返回菜品？ | ✓ 能 |
| **第3天** | 所有 5 个 API 都能用吗？ | ✓ 能 |
| **第4天** | 前端能显示后端返回的数据吗？ | ✓ 能 |
| **第5天** | 完整的用户流程能跑通吗？ | ✓ 能 |
| **第6天** | 应用稳定吗？bug 都修了吗？ | ✓ 是 |
| **第7-9天** | 应用能在线访问吗？ | ✓ 能 |

---

## 🚨 风险与应对

### 风险 1：数据不足
**问题**：菜品数据不够
**解决**：使用 3-5 个示例菜品快速启动，后续补充

### 风险 2：时间不够
**问题**：某天没有完成任务
**对策**：优先完成第 1-4 天的核心功能，第 5-6 天可简化

### 风险 3：前后端通信失败
**问题**：CORS、API 地址等问题
**解决**：
- 检查后端是否配置 CORS
- 检查前端 API 地址是否正确
- 使用 curl 或 Postman 测试 API

### 风险 4：某个技术卡壳
**问题**：FastAPI、SQLAlchemy 等不熟悉
**对策**：
- 使用提供的代码模板
- 搜索官方文档或示例
- 可以跳过高级功能，先实现基础

---

## 💾 每日备份计划

**建议**：每天结束时提交 Git
```bash
git add .
git commit -m "Day X: 完成任务描述"
git push origin main
```

这样可以：
- 保存进度
- 追踪开发历程
- 如果出问题可以回滚

---

## 📊 预期进度

```
Day 1: 数据库搭建     ████████░░ 80%
Day 2: 核心API实现    ████████████░░ 90%
Day 3: API完善        ██████████████ 100%
Day 4: 前端集成       ████████████░░ 90%
Day 5: 完整功能       ██████████████ 100%
Day 6: 调试优化       ██████████████ 100%
Day 7: 部署上线       ██████████████ 100% (可选)

总体进度 → MVP 完成：7-9 天
```

---

## 🎓 学习收获

完成本项目后，你将学会：

✅ FastAPI 项目架构和开发流程  
✅ SQLAlchemy ORM 和数据库设计  
✅ 前后端 API 设计和集成  
✅ JavaScript DOM 操作和异步编程  
✅ 搜索和匹配算法的基础实现  
✅ 从零开始完整的软件项目开发流程  

---

## 📞 需要帮助？

1. **卡在某一步？** 查看 outline.md 的详细步骤
2. **代码错误？** 告诉我错误信息和相关代码
3. **时间紧张？** 可以跳过第 7-9 天，只做核心功能
4. **想优化？** 完成基础功能后再优化算法和 UI

---

**祝你开发顺利！🚀**

> 记住：完成 MVP 比完美更重要。  
> 先让它能工作，再让它更好。

**开始时间**：_______ (今天日期)  
**预期完成**：_______ (9 天后日期)
